---
sticker: emoji//26d3-fe0f
---


오토마타?
solidity?
가스?


---
# Ethereum

### world computer
- 결정론적
- 한정되지않은
- 전역적으로 접근가능한
- 싱글톤 상태
- smart contract
- 전세계에 걸쳐 탈중화화된 컴퓨팅 인프라스트럭쳐
- 블록체인 이용
- 상태변화를 동기화, 저장
- ether라고 하는 암호화폐를 이용하여 실행 자원 비용을 측정하고 제한


# 비트코인과의 차이

### 공통점
- p2p 네트워크
- 상태 변경을 동기화하는 비잔틴 결함 허용 알고리즘(작업증명, 지분증명)
	- 노드들으 tx를 서로 다른 순서 혹은 덜 받은 경우 상태가 달라질 수 있음 이러한 상태를 동기화하는 것을 합의라고 함. 악의적인 순서 바꿈을 막는 알고리즘을 비잔틴 알고리즘이라고 함
- 디지털 서명, 해시
- 디지털 화폐같은 암호학 기반 기술

### 차이점
- 디지털 화폐 지급 네트워크가 주 목적이 아님
- 이더는 월드 컴퓨터로서의 이더리움 플랫폼 사용료를 지불하기 위한 유틸리티 화폐(utility currency)로 사용
- 튜링 완전 언어


# 블록체인 구성요소

- p2p 네트워크
	- gossip 프로토콜을 기반으로 참여자를 연결
	- tx 및 검증된 트랜잭션 블록을 연결
- tx
	- 상태 전이를 나타냄
- 합의규칙
	- tx의 구성요건, 유효성 판단
	- 비트코인의 합의 모델인 나카모토 합의(Nakamoto Consensus)를 사용
	- 순차 단일 서명 블록을 사용하여 작업증명(PoW)의 중요도 가중치가 가장 긴 체인(현재 상태)를 결정 - 비트코인이랑 비슷했음
	- 2022년 9월 15일 ‘Paris : The Merge’를 통해 지분증명(PoS)으로 전환
- 상태머신
	- 합의 규칙에 따라 tx처리
	- JVM처럼 EVM(Ethereum Virtual Machine, 이더리움 가상 머신)에 의해 상태 전이 처리
	- 스마트 컨트랙트라는 EVM 프로그램은 고수준 프로그래밍 언어(ex. 솔리디티) 로 작성되고, EVM에서 실행되도록 바이트코드로 컴파일됨
- 데이터구조(블록체인)
	- 모든 상태 전의의 장부
	- 암호학적으로 보호됨
	- 이더리움의 상태는 트랙잭션 및 시스템 상태가 머클 패트리샤 트리라고 하는 시 리얼라이즈된 해시 데이터 구조
	- 각 노드의 데이터베이스에 저장
- 합의 알고리즘
	- 모든 참여자들이 참여하도록 강제
	- 블록체인의 통제 권한을 탈중화함
- 인센트브 메커니즘
	- 공개된 환경에서 상태 머신에 경제적인 보안성을 제공할 수 있도록 게임 이론적 으로 유효해야 함
	- Ethash라는 작업증명(PoW) 알고리즘을 사용하다 지분증명(PoS)으로 전환
- 구현 소프트웨어(오픈소스)
	- 게스(Go-Ethereum, Geth)와 패리티(Parity)가 가장 유명

# 이더리움 개발
![[Pasted image 20240313093552.png]]![[Pasted image 20240313093643.png]]


![[Pasted image 20240313093856.png]]
![[Pasted image 20240313093919.png]]


# 튜링 완전
### 튜링 머신
- 순차적 메모리(무한 길이의 종이 테이프와 유사)에서 기호를 읽고 쓰는 방식으로 기호를 조작하는 상태 머신으로 구성된 컴퓨터의 수학적 모델

### 튜링 완전
- 시스템이 튜링 머신을 시뮬레이션하는 데 사용할 수 있음을 의미

### 이더리움과 튜링 완전
- 이더리움은 한정된 메모리라는 제한 조건에서 모든 튜링 머신으로 계산될 수 있는 어떠한 알고리즘도 계산할 수 있음 (튜링 완전)

### 튜링 완전 언어는 의외로 쉽게 만들 수 있음
- 22개의 명령어 길이를 갖는 상태의 정의와 함께 4개의 상태를 가지고 6개의 기호만 사용하여 튜링 완전 상태 머신 제작 가능
- 튜링 완전 언어는 정지 문제(halting problem, 임의로 주어진 튜링 머신이 주어진 입력 테이프에 대해 정지하는가 정지하지 않는가를 판정하는 알고리즘의 존재 여부 를 묻는 문제)로 인해 심각한 문제를 야기할 수 있음
- 이더리움은 튜링 완전하기 때문에 어떤 복잡도의 프로그램도 실행할 수 있는 유연 성이 있어 이로 인해 자원 관리와 보안에 치명적 문제를 야기할 수 있음
- 특히 이더리움은 공개 탈중앙화 블록체인이기 때문에 오류 발생시 "껐다 켤 수 없음"

### 튜링 완전의 함축적 의미
- 튜링 완전 시스템은 무한 루프가 발생할 수 있음
- 모든 참여 노드(클라이언트)는 모든 트랜잭션을 검증하고 그 트랜잭션이 호출하는 스마트 컨트랙트를 실행해야 함
- 정지 문제로 인해 이더리움은 스마트 컨트랙트가 종료될 지 혹은 실제로 스마트 컨 트랙트를 실행하지 않고 얼마나 오랫동안 실행될지를 예측할 수 없음
- 이를 악용하면 스마트 컨트랙트의 유효성 검사를 무한히 반복하도록 할 수 있음(DoS)
- 이더리움은 이를 해결하기 위해 가스(gas)라는 과금 메커니즘을 도입 - 미리사용량을 정함

# DApp(탈중앙화 애플리케이션)
- 다양한 용도로 프로그래밍을 할 수 있는 범용적인 블록체인을 만들기 위한 시도 → 댑(DApp) 프로그래밍을 위한 플랫폼

### 댑(DApp)
- ‘스마트 컨트랙트’보다 넓은 의미
- 공개되고 탈중앙화된 피어투피어 기반 서비스 위에 제공되는 웹 애플리케이션
- 블록체인 스마트 컨트랙트
- 웹 프런트엔드 사용자 인터페이스
- 탈중앙화(P2P) 스토리지 프로토콜과 플랫폼
- 탈중앙화(P2P) 메시지 프로토콜과 플랫폼


# 웹3.0(Web3.0)
- 이더리움 재단의 개빈 우드 박사가 제안한 개념
- 중앙 집중적으로 관리되는 애플리케이션이 아닌, 탈중앙화 프로토콜에 의해 구축된 애플리케이션(DApp)에 초점을 맞춤
- web3.js 자바스크립트 라이브러리
	- 브라우저 안에서 실행되는 자바스크립트 애플리케이션과 이더리움 블록체인을 연결
	- 스웜(Swarm)이라는 P2P 스토리지 네트워크와 위스퍼(Whisper)라는 P2P 메시징 서비스를 포함



---

# ether 화폐 단위

- 이더리움은 블록체인 플랫폼을 의미하고, 이더가 화폐 단위를 의미
- 웨이가 최소단위
![[Pasted image 20240313103624.png]]


# 지갑
-  이중 메타마스크 사
![[Pasted image 20240313103805.png]]


# 책임
- 개인키를 플레인 형태(plain form)로, 특히 디지털 형태로 저장하지 말 것
- 개인키는 암호화된 형식으로 디지털 키저장소(keystore) 파일로 저장할 수 있음
- 이 경우 키저장소 파일과 패스워드가 모두 있어야 계정에 접근할 수 있음
- 많은 금액을 보내기 전에 먼저 소액을 보내서 트랜잭션이 잘 진행되는지 확인한 후 많은 금액을 보내는 방식을 사용



# 이더
- 이더리움 가상 머신(Ethereum Virtual Machine, EVM)이라고 하는 에 뮬레이트된 컴퓨터에서 실행되는 컴퓨터 프로그램인 스마트 컨트랙트 (smart contract)를 실행하는데 사용되기 위한 것


# EVM
- 글로벌 싱글톤으로, 마치 전 세계에 걸친 단일 인스턴스 컴퓨터인 것처럼 작동 하며 세상 어디에서나 실행됨
- 이더리움 네트워크의 각 노드는 컨트랙트 실행을 확인하기 위해 EVM의 로컬 사본을 실행하고, 이더리움 블록체인은 트랙잭션과 스마트 컨트랙트를 처리할 때 월드 컴퓨터의 변화하는 상태(state)를 기록함


# 외부 소유 계정(EOA)
- 메타마스크 지갑에서 생성한 계정 유형
- 개인키가 있는 계정
- 스마트 컨트랙트 코드가 없음


# 컨트랙트 계정(contract account)
- 단순한 EOA가 가질 수 없는 스마트 컨트랙트 코드를 가짐
- 개인키가 없고, 스마트 컨트랙트 코드의 로직으로 제어
- 컨트랙트 계정 생성 시 이더리움 블록체인에 기록되고 EVM에 의해 실행되는 소프트웨어 프로그램(스마트 컨트랙트 코드)
- EOA와 마찬가지로 주소가 있으며, 이더를 보내고 받을 수 있음
- 트랜잭션 목적지가 컨트랙트 주소일 때 트랜잭션과 트랜잭션 데이터를 입력으로 사 용하여 컨트랙트가 EVM에서 실행됨(run)
- 이더 외에도 트랜잭션에는 실행할 컨트랙트의 특정 함수와 해당 함수에 전달할 파 라미터를 나타내는 데이터(data)가 포함될 수 있음
- 이를 통해 트랜잭션은 컨트랙트 내의 함수를 호출(call)할 수 있음 - RPC
- 개인키가 없으므로 트랜잭션을 시작할 수는 없음
- EOA만 트랜잭션을 시작(initiate)할 수 있지만, 컨트랙트는 복잡한 실행 경로를 구 축하여 다른 컨트랙트를 호출해서 컨트랙트에 반응(react)할 수 있음





