```SQL
DELETE FROM ATTEND;
DELETE FROM STUDENT;
DELETE FROM SUBJECT;
```

# 문제 1

```sql
CREATE TABLE STUDENT (
    STDNUM NUMBER(12) CONSTRAINT PK_STUDENTNUM PRIMARY KEY,
    NAME VARCHAR(20) NOT NULL,
    GRADE NUMBER(1) NOT NULL CHECK (GRADE BETWEEN 1 AND 4)
);

CREATE TABLE SUBJECT (
    SUBJECTNUM NUMBER(4) CONSTRAINT PK_SUBECTNUM PRIMARY KEY,
    NAME VARCHAR(20) NOT NULL
);

CREATE TABLE ATTEND (
    STDNUM NUMBER(9) CONSTRAINT FK_ATT_STDNUM REFERENCES STUDENT(STDNUM),
    SUBJECTNUM NUMBER(4) CONSTRAINT FK_ATT_SUBJECTNUM REFERENCES SUBJECT(SUBJECTNUM),
    ATTENDDATE DATE NOT NULL,
    CONSTRAINT PK_ATTEND PRIMARY KEY (STDNUM, SUBJECTNUM)
);
```

---
# 문제 2
```sql
INSERT INTO STUDENT VALUES(202311103, '박민수', 1);
INSERT INTO STUDENT VALUES(202011018, '최정원', 2);
INSERT INTO STUDENT VALUES(202212234, '박수빈', 2);
INSERT INTO STUDENT VALUES(202312532, '이형석', 1);
INSERT INTO STUDENT VALUES(201915015, '박태경', 4);
INSERT INTO STUDENT VALUES(202015019, '김백수', 3);


INSERT INTO SUBJECT VALUES(1234, 'C언어');
INSERT INTO SUBJECT VALUES(2345, '파이썬');
INSERT INTO SUBJECT VALUES(3456, 'PHP');
INSERT INTO SUBJECT VALUES(4567, '자바');
INSERT INTO SUBJECT VALUES(5678, 'C++');
INSERT INTO SUBJECT VALUES(6789, 'C#');
INSERT INTO SUBJECT VALUES(1246, 'GO');
INSERT INTO SUBJECT VALUES(9999, '데이터베이스');

INSERT INTO ATTEND VALUES(202311103, 1234, TO_DATE('2023-11-27', 'YYYY-MM-DD'));
INSERT INTO ATTEND VALUES(202311103, 2345, TO_DATE('2023-11-28', 'YYYY-MM-DD'));
INSERT INTO ATTEND VALUES(202311103, 3456, TO_DATE('2023-11-29', 'YYYY-MM-DD'));
INSERT INTO ATTEND VALUES(202011018, 4567, TO_DATE('2023-11-27', 'YYYY-MM-DD'));
INSERT INTO ATTEND VALUES(202212234, 5678, TO_DATE('2023-11-29', 'YYYY-MM-DD'));
INSERT INTO ATTEND VALUES(202212234, 4567, TO_DATE('2023-11-27', 'YYYY-MM-DD'));
INSERT INTO ATTEND VALUES(202312532, 9999, TO_DATE('2023-11-27', 'YYYY-MM-DD'));
INSERT INTO ATTEND VALUES(201915015, 1246, TO_DATE('2023-11-28', 'YYYY-MM-DD'));
INSERT INTO ATTEND VALUES(202311103, 1246, TO_DATE('2023-11-28', 'YYYY-MM-DD'));
```

- 실행결과
![[Pasted image 20231204083519.png]]
![[Pasted image 20231204083627.png]]
![[Pasted image 20231204083640.png]]

---
# 문제3
- 문제 3-1. 과목이름이 ‘데이터베이스'인 과목의 과목번호를 검색하라.
```sql
SELECT SUBJECTNUM FROM SUBJECT WHERE SUBJECTNAME='데이터베이스';
```
![[Pasted image 20231130212126.png | center | 100]]
![[Pasted image 20231204084341.png]]

- 문제 3-2. 학생의 이름이 ‘박’으로 시작하는 학생의 학번과 이름을 검색하라.
```sql
SELECT STDNUM, NAME FROM STUDENT WHERE NAME LIKE '박%';
```
![[Pasted image 20231204084422.png]]

- 문제 3-3. 과목번호 ‘1246'을 수강한 학생의 학번과 학생이름을 검색 하라(학번 오름차순 정렬하여 검색할 것).
```sql
SELECT STDNUM, NAME 
	FROM STUDENT
	WHERE STDNUM IN (SELECT STDNUM FROM ATTEND WHERE SUBJECTNUM='1246')
	ORDER BY STDNUM ASC;
```
![[Pasted image 20231204084631.png]]


- 문제 3-4. 어떤 학생도 수강하지 않은 과목의 과목번호를 검색하라.
```sql
SELECT SUBJECTNUM
	FROM SUBJECT
    WHERE SUBJECTNUM NOT IN (SELECT DISTINCT SUBJECTNUM FROM ATTEND);
```
![[Pasted image 20231204085621.png]]


- 문제 3-5. 과목번호 '1246'을 수강한 학생들의 학년을 검색하라. 이 때 동일한 학년이 중복되어서 나타나지 않도록 한다.
```sql
SELECT DISTINCT GRADE
	FROM STUDENT
	WHERE STDNUM IN (SELECT STDNUM FROM ATTEND WHERE SUBJECTNUM=1246);
```
![[Pasted image 20231204085819.png]]

- 문제 3-6. 2학년 학생이 수강한 과목의 과목번호와 과목이름을 검색 하라. (주의사항 : 부속질의를 사용할 것)
```sql
SELECT DISTINCT SUBJECT.SUBJECTNUM, SUBJECT.NAME
    FROM ATTEND 
    JOIN SUBJECT ON ATTEND.SUBJECTNUM=SUBJECT.SUBJECTNUM 
	WHERE ATTEND.STDNUM IN (
		SELECT STDNUM FROM STUDENT WHERE GRADE=2
	);
```
![[Pasted image 20231204090711.png]]

- 문제 3-7. 2023년도에 2개 이상의 과목을 수강한 학생의 학번에 대해, 학번과 해당 학생이 수강한 교과목의 총 갯수를 검색하라.
```sql
SELECT STDNUM, COUNT(SUBJECTNUM)
	FROM ATTEND
	WHERE EXTRACT(YEAR FROM ATTENDDATE) = 2023
	GROUP BY STDNUM
	HAVING COUNT(SUBJECTNUM) >= 2;
```
![[Pasted image 20231204091055.png]]

---

# 문제 4
1. 도메인 무결성 제약조건에 위배
```sql
INSERT INTO STUDENT (NAME)VALUES('구자용');
```
![[Pasted image 20231204094542.png]]
NULL을 허용하지 않는 속성에 대해서 값을 넣어주지 않았기 때문

```sql
INSERT INTO SUBJECT VALUES('이삼사오', '파이썬2');
```
![[Pasted image 20231204095422.png]]
데이터 타입이 올바르지 않음


2. 개체 무결성 제약조건에 위배
```sql
INSERT INTO SUBJECT VALUES(2345, '파이썬2');
```
![[Pasted image 20231204094905.png]]
투플은 중복되었기 때문


3. 참조 무결성 제약조건 위배
```sql
INSERT INTO ATTEND (STDNUM, SUBJECTNUM, ATTENDDATE) VALUES (123123123, 9876, TO_DATE('2023-01-01', 'YYYY_MM-DD'));
```
![[Pasted image 20231204095729.png]]
존재하지 않는 학번을 갖는 수강 레코드를 참조하고 있기 때문


---

# 완성 여부
- 문제 1 - 완성
- 문제 2 - 완성
- 문제 3 - 완성
- 문제 4 - 완성


---

# 느낀점
수업시간에 했던 실습보다 쉬워서 할만했었던 것 같습니다.
그러나 사소한 문법에서 잘못알고 있었던 것도 꽤 많았던 것 같습니다.
ALIAS 기능을 많이 사용하려고 하는데, HAVING절에서 안되는 경우가 있다는 것도 이번 과제를 하면서 처음 겪어봤습니다.