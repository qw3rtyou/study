#!/usr/bin/env python3

hex_list = [(hex(i)[2:].zfill(2).upper()) for i in range(256)]

with open("encfile", "r", encoding="utf-8") as f:
    plain_s = f.read()

plain_list = [plain_s[i : i + 2] for i in range(0, len(plain_s), 2)]

enc_list = list(range(len(plain_list)))

for i in range(len(plain_list)):
    hex_b = plain_list[i]
    index = hex_list.index(hex_b)
    enc_list[i] = hex_list[(index + 128) % len(hex_list)]

enc_list = "".join(enc_list)

with open("flag.png", "wb") as f:
    for i in range(0, len(enc_list), 2):
        hex_byte = enc_list[i : i + 2]
        byte_value = int(hex_byte, 16)
        f.write(bytes([byte_value]))


# #!/usr/bin/env python3

# hex_list = [(hex(i)[2:].zfill(2).upper()) for i in range(256)]

# with open("flag.png", "rb") as f:
#     plain_s = f.read()

# plain_list = [hex(i)[2:].zfill(2).upper() for i in plain_s]

# enc_list = list(range(len(plain_list)))

# for i in range(len(plain_list)):
#     hex_b = plain_list[i]
#     index = hex_list.index(hex_b)
#     enc_list[i] = hex_list[(index + 128) % len(hex_list)]

# enc_list = "".join(enc_list)

# with open("encfile", "w", encoding="utf-8") as f:
#     f.write(enc_list)
